
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Lets-Plot Usage Guide" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://lets-plot.org/examples/nbsphinx/user_guide.html" />
<meta property="og:site_name" content="Lets-Plot" />
<meta property="og:description" content="System requirements, Installation, Understanding architecture, Learning API, Getting started. Lets-Plot is an open-source plotting library for statistical data. It is implemented using the Kotlin p..." />
<meta property="og:image" content="https://lets-plot.org/_static/images/open-graph.png" />
<meta property="og:image:alt" content="Lets-Plot" />
<meta name="description" content="System requirements, Installation, Understanding architecture, Learning API, Getting started. Lets-Plot is an open-source plotting library for statistical data. It is implemented using the Kotlin p..." />

    <title>Lets-Plot Usage Guide</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=defcf438" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/colors.css?v=75bbc594" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/dataframe.css?v=1855a575" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=68f2c66a"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/nbsphinx/user_guide';</script>
    <script src="../../_static/js/custom.js?v=a8badf0c"></script>
    <script src="../../_static/js/language_data.js?v=2e3e2f07"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="google-site-verification" content="FfoGmeQ4UDHfoTW3e2ngIW5d8JW_TPcSKV7GMH3jK40" />

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">



  <a class="navbar-brand logo" href="../../index.html">





  
    
  
  
  <img src="../../_static/logo-light.svg" class="logo__image only-light" alt="Lets-Plot"/>
  <script>document.write(`<img src="../../_static/logo-dark.svg" class="logo__image only-dark" alt="Lets-Plot"/>`);</script>



  </a>





  <a class="navbar-brand logo-title" href="../../python/index.html">
    <p class="title logo__title">Lets-Plot for Python</p>
  </a>
</div>
    
      <div class="navbar-item">

   

<a class="navbar-brand version" href="../../python/pages/whats_new.html">
  <p>v4.6.1</p>
</a>
</div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
      
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/notebooks.html">
    Notebooks
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../python/pages/charts.html">
    Charts
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../python/pages/maps.html">
    Maps
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../python/pages/geocoding.html">
    Geocoding
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../python/pages/gallery.html">
    Gallery
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../python/pages/bistro.html">
    'bistro' Plots
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../python/pages/whats_new.html">
    What is New
  </a>
</li>

                </ul>
            </li>
            
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">
<ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
  
  
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/JetBrains/lets-plot" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
  
  
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/lets-plot" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom" excluded_from="['index', '404']"><img src="../../_static/images/logo/pypi.svg" class="icon-link-image" alt="PyPI"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
      
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/notebooks.html">
    Notebooks
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/charts.html">
    Charts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/maps.html">
    Maps
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/geocoding.html">
    Geocoding
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/gallery.html">
    Gallery
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/bistro.html">
    'bistro' Plots
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../python/pages/whats_new.html">
    What is New
  </a>
</li>

    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">
<ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
  
  
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/JetBrains/lets-plot" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
  
  
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/lets-plot" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom" excluded_from="['index', '404']"><img src="../../_static/images/logo/pypi.svg" class="icon-link-image" alt="PyPI"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="lets-plot-usage-guide">
<h1>Lets-Plot Usage Guide<a class="headerlink" href="#lets-plot-usage-guide" title="Link to this heading">#</a></h1>
<a href="https://opensource.org/licenses/MIT">
   <img align="left" 
        src="https://img.shields.io/badge/License-MIT-yellow.svg" 
        alt="Couldn't load MIT license svg"/>
</a>
<br/>
<br/>
<ul class="simple">
<li><p>System requirements</p></li>
<li><p>Installation</p></li>
<li><p>Understanding architecture</p></li>
<li><p>Learning API</p></li>
<li><p>Getting started</p></li>
</ul>
<p><strong>Lets-Plot</strong> is an open-source plotting library for statistical data. It is implemented using the
<a class="reference external" href="https://kotlinlang.org/">Kotlin programming language</a> that has a multi-platform nature.
That’s why Lets-Plot provides the plotting functionality that
is packaged as a JavaScript library, a JVM library, and a native Python extension.</p>
<p>The design of the Lets-Plot library is heavily influenced by
<a class="reference external" href="https://ggplot2.tidyverse.org">ggplot2</a> library.</p>
<p><a name="SystemRequirementa" id="sys"></a></p>
<section id="system-requirements">
<h2>System requirements<a class="headerlink" href="#system-requirements" title="Link to this heading">#</a></h2>
<p>When installing the Lets-Plot library, consider the following requirements.</p>
<p>Supported operating systems:</p>
<ul class="simple">
<li><p>macOS</p></li>
<li><p>Linux</p></li>
<li><p>Windows</p></li>
</ul>
<p>Supported Python versions:</p>
<ul class="simple">
<li><p>3.8</p></li>
<li><p>3.9</p></li>
<li><p>3.10</p></li>
<li><p>3.11</p></li>
<li><p>3.12</p></li>
<li><p>3.13</p></li>
</ul>
<p><a name="Installation" id="install"></a></p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">lets-plot</span></code> package is available in the <a class="reference external" href="https://pypi.org/project/lets-plot/">pypi.org</a> repository.
Execute the following command to install the <code class="docutils literal notranslate"><span class="pre">lets-plot</span></code> package on your Python interpreter:</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">lets-plot</span></code></p>
<p><a name="Implementation" id="implementation"></a></p>
</section>
<section id="understanding-lets-plot-architecture">
<h2>Understanding Lets-Plot architecture<a class="headerlink" href="#understanding-lets-plot-architecture" title="Link to this heading">#</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">lets-plot</span></code>, the <strong>plot</strong> is represented at least by one
<strong>layer</strong>. It can be built based on the default dataset with the aesthetics mappings, set of scales, or additional
features applied.</p>
<p>The <strong>Layer</strong> is responsible for creating the objects painted on the ‘canvas’ and it contains the following elements:</p>
<ul class="simple">
<li><p><strong>Data</strong> - the set of data specified either once for all layers or on a per layer basis.
One plot can combine multiple different datasets (one per layer).</p></li>
<li><p><strong>Aesthetic mapping</strong> - describes how variables in the dataset are mapped to the visual properties of the layer, such as color, shape, size, or position.</p></li>
<li><p><strong>Geometric object</strong> - a geometric object that represents a particular type of plots.</p></li>
<li><p><strong>Statistical transformation</strong> - computes some kind of statistical summary on the raw input data.
For example, <code class="docutils literal notranslate"><span class="pre">bin</span></code> statistics is used for histograms and <code class="docutils literal notranslate"><span class="pre">smooth</span></code> is used for regression lines.
Most stats take additional parameters to specify details of the statistical transformation of data.</p></li>
<li><p><strong>Position adjustment</strong> - a method used to compute the final coordinates of geometry.
Used to build variants of the same <code class="docutils literal notranslate"><span class="pre">geom</span></code> object or to avoid overplotting.</p></li>
</ul>
<img src="images/layer.png" width="628" height="636" />
<p><a name="API" id="api"></a></p>
</section>
<section id="learning-api">
<h2>Learning API<a class="headerlink" href="#learning-api" title="Link to this heading">#</a></h2>
<p>The typical code fragment that renders a plot looks as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">lets_plot</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ggplot</span><span class="p">(</span><span class="o">&lt;</span><span class="n">dataf</span><span class="o">&gt;</span><span class="p">)</span> 
<span class="n">p</span> <span class="o">+</span> <span class="n">geom_</span><span class="o">&lt;</span><span class="n">plot_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">mapping</span><span class="o">=</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">other</span><span class="o">&gt;=</span><span class="s1">&#39;&lt;data column name&gt;&#39;</span><span class="p">),</span> <span class="n">stat</span><span class="o">=&lt;</span><span class="n">stat</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">position</span><span class="o">=&lt;</span><span class="n">adjustment</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<section id="geometric-objects-geom">
<h3>Geometric objects <code class="docutils literal notranslate"><span class="pre">geom</span></code><a class="headerlink" href="#geometric-objects-geom" title="Link to this heading">#</a></h3>
<p>You can add a new geometric object (or plot layer) by creating it using the <code class="docutils literal notranslate"><span class="pre">geom_xxx()</span></code> function and then adding this object to <code class="docutils literal notranslate"><span class="pre">ggplot</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="n">p</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">()</span>
</pre></div>
</div>
<p>The following plots are supported:</p>
<ul class="simple">
<li><p>Area plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_area.html"><code class="docutils literal notranslate"><span class="pre">geom_area()</span></code></a></p></li>
<li><p>Discrete plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_bar.html"><code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_pie.html"><code class="docutils literal notranslate"><span class="pre">geom_pie()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_lollipop.html"><code class="docutils literal notranslate"><span class="pre">geom_lollipop()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_count.html"><code class="docutils literal notranslate"><span class="pre">geom_count()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.stat_sum.html"><code class="docutils literal notranslate"><span class="pre">stat_sum()</span></code></a></p></li>
<li><p>Boxplot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_boxplot.html"><code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code></a></p></li>
<li><p>Contours: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_contour.html"><code class="docutils literal notranslate"><span class="pre">geom_contour()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_contourf.html"><code class="docutils literal notranslate"><span class="pre">geom_contourf()</span></code></a></p></li>
<li><p>Connectors <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_path.html"><code class="docutils literal notranslate"><span class="pre">geom_path()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_line.html"><code class="docutils literal notranslate"><span class="pre">geom_line()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_segment.html"><code class="docutils literal notranslate"><span class="pre">geom_segment()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_curve.html"><code class="docutils literal notranslate"><span class="pre">geom_curve()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_spoke.html"><code class="docutils literal notranslate"><span class="pre">geom_spoke()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_step.html"><code class="docutils literal notranslate"><span class="pre">geom_step()</span></code></a></p></li>
<li><p>Density plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_density.html"><code class="docutils literal notranslate"><span class="pre">geom_density()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_area_ridges.html"><code class="docutils literal notranslate"><span class="pre">geom_area_ridges()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_violin.html"><code class="docutils literal notranslate"><span class="pre">geom_violin()</span></code></a>
and <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_density2d.html"><code class="docutils literal notranslate"><span class="pre">geom_density2d()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_density2df.html"><code class="docutils literal notranslate"><span class="pre">geom_density2df()</span></code></a></p></li>
<li><p>Error-bar plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_errorbar.html"><code class="docutils literal notranslate"><span class="pre">geom_errorbar()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_crossbar.html"><code class="docutils literal notranslate"><span class="pre">geom_crossbar()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_linerange.html"><code class="docutils literal notranslate"><span class="pre">geom_linerange()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_pointrange.html"><code class="docutils literal notranslate"><span class="pre">geom_pointrange()</span></code></a></p></li>
<li><p>Histogram: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_freqpoly.html"><code class="docutils literal notranslate"><span class="pre">geom_freqpoly()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_histogram.html"><code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_bin2d.html"><code class="docutils literal notranslate"><span class="pre">geom_bin2d()</span></code></a> and <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_hex.html"><code class="docutils literal notranslate"><span class="pre">geom_hex()</span></code></a></p></li>
<li><p>Jitter plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_jitter.html"><code class="docutils literal notranslate"><span class="pre">geom_jitter()</span></code></a></p></li>
<li><p>Line plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_line.html"><code class="docutils literal notranslate"><span class="pre">geom_line()</span></code></a></p></li>
<li><p>Reference lines: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_abline.html"><code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_hline.html"><code class="docutils literal notranslate"><span class="pre">geom_hline()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_vline.html"><code class="docutils literal notranslate"><span class="pre">geom_vline()</span></code></a></p></li>
<li><p>Polygons:  <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_polygon.html"><code class="docutils literal notranslate"><span class="pre">geom_polygon</span></code></a></p></li>
<li><p>Rectangles, Tiles, Raster: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_rect.html"><code class="docutils literal notranslate"><span class="pre">geom_rect()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_tile.html"><code class="docutils literal notranslate"><span class="pre">geom_tile()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_raster.html"><code class="docutils literal notranslate"><span class="pre">geom_raster()</span></code></a></p></li>
<li><p>Ribbons: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_ribbon.html"><code class="docutils literal notranslate"><span class="pre">geom_ribbon()</span></code></a></p></li>
<li><p>Scatter plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_point.html"><code class="docutils literal notranslate"><span class="pre">geom_point()</span></code></a></p></li>
<li><p>Dot plot: <a class="reference external" href="http://lets-plot.org/python/pages/api/lets_plot.geom_dotplot.html"><code class="docutils literal notranslate"><span class="pre">geom_dotplot()</span></code></a>, <a class="reference external" href="http://lets-plot.org/python/pages/api/lets_plot.geom_ydotplot.html"><code class="docutils literal notranslate"><span class="pre">geom_ydotplot()</span></code></a></p></li>
<li><p>Regression lines: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_smooth.html"><code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code></a></p></li>
<li><p>Q-Q plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_qq.html"><code class="docutils literal notranslate"><span class="pre">geom_qq()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_qq_line.html"><code class="docutils literal notranslate"><span class="pre">geom_qq_line()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_qq2.html"><code class="docutils literal notranslate"><span class="pre">geom_qq2()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_qq2_line.html"><code class="docutils literal notranslate"><span class="pre">geom_qq2_line()</span></code></a></p></li>
<li><p>ECDF plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.stat_ecdf.html"><code class="docutils literal notranslate"><span class="pre">stat_ecdf()</span></code></a></p></li>
<li><p>Summary: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.stat_summary.html"><code class="docutils literal notranslate"><span class="pre">stat_summary()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.stat_summary_bin.html"><code class="docutils literal notranslate"><span class="pre">stat_summary_bin()</span></code></a></p></li>
<li><p>Function plot: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_function.html"><code class="docutils literal notranslate"><span class="pre">geom_function()</span></code></a></p></li>
<li><p>Text: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_text.html"><code class="docutils literal notranslate"><span class="pre">geom_text()</span></code></a>, <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_label.html"><code class="docutils literal notranslate"><span class="pre">geom_label()</span></code></a></p></li>
<li><p>Map: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_map.html"><code class="docutils literal notranslate"><span class="pre">geom_map()</span></code></a></p></li>
<li><p>Image: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_imshow.html"><code class="docutils literal notranslate"><span class="pre">geom_imshow()</span></code></a></p></li>
<li><p>Blank geometry: <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.geom_blank.html"><code class="docutils literal notranslate"><span class="pre">geom_blank()</span></code></a></p></li>
</ul>
<p>See the <a class="reference external" href="https://lets-plot.org/python/pages/charts.html">geom reference</a> for more information about the supported
geometric methods, their arguments, and default values.</p>
</section>
<section id="collections-of-plots">
<h3>Collections of plots<a class="headerlink" href="#collections-of-plots" title="Link to this heading">#</a></h3>
<p>With the <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.ggbunch.html"><code class="docutils literal notranslate"><span class="pre">ggbunch()</span></code></a> method, you can render a collection of plots:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ggbunch</span><span class="p">(</span>
    <span class="n">plots</span><span class="o">=</span><span class="p">[</span><span class="n">plot1</span><span class="p">,</span> <span class="n">plot2</span><span class="p">],</span>
    <span class="n">regions</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mf">.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="p">)</span> <span class="o">+</span> <span class="n">ggsize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://nbviewer.jupyter.org/github/JetBrains/lets-plot-docs/blob/master/source/examples/cookbook/ggbunch.ipynb">ggbunch</a> example for more information.</p>
</section>
<section id="interactivity">
<h3>Interactivity<a class="headerlink" href="#interactivity" title="Link to this heading">#</a></h3>
<p>Add <a class="reference external" href="https://lets-plot.org/python/pages/api/lets_plot.ggtb.html"><code class="docutils literal notranslate"><span class="pre">ggtb()</span></code></a> to enable <strong>zoom/pan</strong> interactivity on plot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">()</span>
<span class="n">p</span> <span class="o">+</span> <span class="n">ggtb</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="stat-stat">
<h3>Stat <code class="docutils literal notranslate"><span class="pre">stat</span></code><a class="headerlink" href="#stat-stat" title="Link to this heading">#</a></h3>
<p>Add <code class="docutils literal notranslate"><span class="pre">stat</span></code> as an argument to <code class="docutils literal notranslate"><span class="pre">geom_xxx()</span></code> function to define statistical data transformations:</p>
<p><code class="docutils literal notranslate"><span class="pre">geom_point(stat='count')</span></code></p>
<p>Supported transformations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">identity</span></code>:  leave the data unchanged</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>:  calculate the number of points with same x-axis coordinate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bin</span></code>:  calculate the number of points falling in each of adjacent equally sized ranges along the x-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bin2d</span></code>:  calculate the number of points falling in each of adjacent equal sized rectangles on the plot plane</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">smooth</span></code>:  perform smoothing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contour</span></code>, <code class="docutils literal notranslate"><span class="pre">contourf</span></code>: calculate contours of 3D data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boxplot</span></code>: calculate components of a box plot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">density</span></code>, <code class="docutils literal notranslate"><span class="pre">density2d</span></code>, <code class="docutils literal notranslate"><span class="pre">density2df</span></code>: perform a kernel density estimation for 1D and 2D data</p></li>
</ul>
</section>
<section id="aesthetic-mappings-mapping">
<h3>Aesthetic mappings <code class="docutils literal notranslate"><span class="pre">mapping</span></code><a class="headerlink" href="#aesthetic-mappings-mapping" title="Link to this heading">#</a></h3>
<p>With mappings, you can define how variables in dataset are mapped to the visual elements of the plot.
Pass the result of the <code class="docutils literal notranslate"><span class="pre">aes(x,</span> <span class="pre">y,</span> <span class="pre">other)</span></code> function to <code class="docutils literal notranslate"><span class="pre">geom</span></code>, where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code>: the dataframe column to map to the x axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code>: the dataframe column to map to the y axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: other visual properties of the plot, such as color, shape, size, or position.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">geom_bar(x='cty',</span> <span class="pre">y='hwy',</span> <span class="pre">color='cyl')</span></code>
you can use a simplified form:
<code class="docutils literal notranslate"><span class="pre">geom_bar('cty',</span> <span class="pre">'hwy',</span> <span class="pre">color='cyl')</span></code></p>
</section>
<section id="position-adjustment-position">
<h3>Position adjustment <code class="docutils literal notranslate"><span class="pre">position</span></code><a class="headerlink" href="#position-adjustment-position" title="Link to this heading">#</a></h3>
<p>All layers have a position adjustment that computes the final coordinates of geometry.
Position adjustment is used to build variances of the same plots and resolve overlapping.
Override the default settings by using the <code class="docutils literal notranslate"><span class="pre">position</span></code> argument in the <code class="docutils literal notranslate"><span class="pre">geom</span></code> functions:</p>
<p><code class="docutils literal notranslate"><span class="pre">geom_bar(position='dodge')</span></code></p>
<p>Available adjustments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dodge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jitter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jitterdodge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nudge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">identity</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fill</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stack</span></code></p></li>
</ul>
<p>See the <a class="reference external" href="https://lets-plot.org/python/pages/api.html#positions">position reference</a> for more information about position adjustments.</p>
</section>
<section id="features-affecting-the-entire-plot">
<h3>Features affecting the entire plot<a class="headerlink" href="#features-affecting-the-entire-plot" title="Link to this heading">#</a></h3>
<section id="scales">
<h4>Scales<a class="headerlink" href="#scales" title="Link to this heading">#</a></h4>
<p>Enables choosing a reasonable scale for each mapped variable depending on the variable attributes. Override default scales to tweak
details like the axis labels or legend keys, or to use a completely different translation from data to aesthetic.
For example, to override the fill color on the histogram:</p>
<p><code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">+</span> <span class="pre">geom_histogram()</span> <span class="pre">+</span> <span class="pre">scale_fill_brewer(name=&quot;Trend&quot;,</span> <span class="pre">palette=&quot;RdPu&quot;)</span></code></p>
<p>See the list of the available <code class="docutils literal notranslate"><span class="pre">scale</span></code> methods in the <a class="reference external" href="https://lets-plot.org/python/pages/api.html#scales">scale reference</a></p>
</section>
<section id="coordinated-system">
<h4>Coordinated system<a class="headerlink" href="#coordinated-system" title="Link to this heading">#</a></h4>
<p>The coordinate system determines how the x and y aesthetics combine to position elements in the plot.
For example, to override the default X and Y ratio:</p>
<p><code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">+</span> <span class="pre">coord_fixed(ratio=2)</span></code></p>
<p>See the list of the available methods in <a class="reference external" href="https://lets-plot.org/python/pages/api.html#coordinates">coordinates reference</a></p>
</section>
<section id="legend">
<h4>Legend<a class="headerlink" href="#legend" title="Link to this heading">#</a></h4>
<p>The axes and legends help users interpret plots.
Use the <code class="docutils literal notranslate"><span class="pre">guide</span></code> methods or the <code class="docutils literal notranslate"><span class="pre">guide</span></code> argument of the <code class="docutils literal notranslate"><span class="pre">scale</span></code> method to customize the legend.
For example, to define the number of columns in the legend:</p>
<p><code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">+</span> <span class="pre">scale_color_discrete(guide=guide_legend(ncol=2))</span></code></p>
<p>See more information in the <a class="reference external" href="https://lets-plot.org/python/pages/api.html#scale-guides">guide reference</a></p>
<p>Adjust legend location on plot using the <code class="docutils literal notranslate"><span class="pre">theme</span></code> legend_position, legend_justification and legend_direction methods, see:
[TBD]</p>
</section>
<section id="sampling">
<h4>Sampling<a class="headerlink" href="#sampling" title="Link to this heading">#</a></h4>
<p>Sampling is a special technique of data transformation built into Lets-Plot and it is applied after stat transformation.
Sampling helps prevents UI freezes and out-of-memory crashes when attempting to plot an excessively large number of geometries.
By default, the technique applies automatically when the data volume exceeds a certain threshold.
The <code class="docutils literal notranslate"><span class="pre">none</span></code> value disables any sampling for the given layer. The sampling methods can be chained together using the + operator.</p>
<p>Available methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sampling_random_stratified</span></code>: randomly selects points from each group proportionally to the group size but also ensures
that each group is represented by at least a specified minimum number of points.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sampling_random</span></code>: selects data points at randomly chosen indices without replacement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sampling_pick</span></code>: analyses X-values and selects all points which X-values get in the set of first <code class="docutils literal notranslate"><span class="pre">n</span></code> X-values found in the population.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sampling_systematic</span></code>: selects data points at evenly distributed indices.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sampling_vertex_dp</span></code>, <code class="docutils literal notranslate"><span class="pre">sampling_vertex_vw</span></code>: simplifies plotting of polygons.
There is a choice of two implementation algorithms: Douglas-Peucker (<code class="docutils literal notranslate"><span class="pre">_dp</span></code>) and
Visvalingam-Whyatt (<code class="docutils literal notranslate"><span class="pre">_vw</span></code>).</p></li>
</ul>
<p>For more details, see the <a class="reference external" href="https://lets-plot.org/python/pages/sampling.html">sampling reference</a>.</p>
<p><a name="GSG" id="gsg"></a></p>
</section>
</section>
<section id="getting-started">
<h3>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">#</a></h3>
<p>Let’s plot a point plot built using the mpg dataset.</p>
<p>Create the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object and retrieve the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data set</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="n">mpg</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/JetBrains/lets-plot-docs/master/data/mpg.csv&quot;</span><span class="p">)</span>
<span class="n">mpg</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>manufacturer</th>
      <th>model</th>
      <th>displ</th>
      <th>year</th>
      <th>cyl</th>
      <th>trans</th>
      <th>drv</th>
      <th>cty</th>
      <th>hwy</th>
      <th>fl</th>
      <th>class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>audi</td>
      <td>a4</td>
      <td>1.8</td>
      <td>1999</td>
      <td>4</td>
      <td>auto(l5)</td>
      <td>f</td>
      <td>18</td>
      <td>29</td>
      <td>p</td>
      <td>compact</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>audi</td>
      <td>a4</td>
      <td>1.8</td>
      <td>1999</td>
      <td>4</td>
      <td>manual(m5)</td>
      <td>f</td>
      <td>21</td>
      <td>29</td>
      <td>p</td>
      <td>compact</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>audi</td>
      <td>a4</td>
      <td>2.0</td>
      <td>2008</td>
      <td>4</td>
      <td>manual(m6)</td>
      <td>f</td>
      <td>20</td>
      <td>31</td>
      <td>p</td>
      <td>compact</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>audi</td>
      <td>a4</td>
      <td>2.0</td>
      <td>2008</td>
      <td>4</td>
      <td>auto(av)</td>
      <td>f</td>
      <td>21</td>
      <td>30</td>
      <td>p</td>
      <td>compact</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>audi</td>
      <td>a4</td>
      <td>2.8</td>
      <td>1999</td>
      <td>6</td>
      <td>auto(l5)</td>
      <td>f</td>
      <td>16</td>
      <td>26</td>
      <td>p</td>
      <td>compact</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Plot the basic point plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic plotting</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">lets_plot</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="c1"># Load Lets-Plot JS library</span>
<span class="n">LetsPlot</span><span class="o">.</span><span class="n">setup_html</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
            <div id="FzkQiy"></div>
            <script type="text/javascript" data-lets-plot-script="library">
                if(!window.letsPlotCallQueue) {
                    window.letsPlotCallQueue = [];
                }; 
                window.letsPlotCall = function(f) {
                    window.letsPlotCallQueue.push(f);
                };
                (function() {
                    var script = document.createElement("script");
                    script.type = "text/javascript";
                    script.src = "https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.6.1/js-package/distr/lets-plot.min.js";
                    script.onload = function() {
                        window.letsPlotCall = function(f) {f();};
                        window.letsPlotCallQueue.forEach(function(f) {f();});
                        window.letsPlotCallQueue = [];
                        
                    };
                    script.onerror = function(event) {
                        window.letsPlotCall = function(f) {};    // noop
                        window.letsPlotCallQueue = [];
                        var div = document.createElement("div");
                        div.style.color = 'darkred';
                        div.textContent = 'Error loading Lets-Plot JS';
                        document.getElementById("FzkQiy").appendChild(div);
                    };
                    var e = document.getElementById("FzkQiy");
                    e.appendChild(script);
                })()
            </script>
            </div></div>
</div>
<p>Perform the following aesthetic mappings:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> = displ (the <strong>displ</strong> column of the dataframe)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code> = hwy  (the <strong>hwy</strong> column of the dataframe)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color</span></code> = cyl (the <strong>cyl</strong> column of the dataframe)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">mpg</span><span class="p">)</span>

<span class="n">p</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="s1">&#39;hwy&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyl&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="sLpoIW"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   const forceImmediateRender = false;
   const responsive = false;
   
   let sizing = {
       width_mode: "MIN",
       height_mode: "SCALED",
       width: null, 
       height: null 
   };
   
   const preferredWidth = document.body.dataset.letsPlotPreferredWidth;
   if (preferredWidth !== undefined) {
       sizing = {
           width_mode: 'FIXED',
           height_mode: 'SCALED',
           width: parseFloat(preferredWidth)
       };
   }
   
   const containerDiv = document.getElementById("sLpoIW");
   let fig = null;
   
   function renderPlot() {
       if (fig === null) {
           const plotSpec = {
"data":{
"displ":[1.8,1.8,2.0,2.0,2.8,2.8,3.1,1.8,1.8,2.0,2.0,2.8,2.8,3.1,3.1,2.8,3.1,4.2,5.3,5.3,5.3,5.7,6.0,5.7,5.7,6.2,6.2,7.0,5.3,5.3,5.7,6.5,2.4,2.4,3.1,3.5,3.6,2.4,3.0,3.3,3.3,3.3,3.3,3.3,3.8,3.8,3.8,4.0,3.7,3.7,3.9,3.9,4.7,4.7,4.7,5.2,5.2,3.9,4.7,4.7,4.7,5.2,5.7,5.9,4.7,4.7,4.7,4.7,4.7,4.7,5.2,5.2,5.7,5.9,4.6,5.4,5.4,4.0,4.0,4.0,4.0,4.6,5.0,4.2,4.2,4.6,4.6,4.6,5.4,5.4,3.8,3.8,4.0,4.0,4.6,4.6,4.6,4.6,5.4,1.6,1.6,1.6,1.6,1.6,1.8,1.8,1.8,2.0,2.4,2.4,2.4,2.4,2.5,2.5,3.3,2.0,2.0,2.0,2.0,2.7,2.7,2.7,3.0,3.7,4.0,4.7,4.7,4.7,5.7,6.1,4.0,4.2,4.4,4.6,5.4,5.4,5.4,4.0,4.0,4.6,5.0,2.4,2.4,2.5,2.5,3.5,3.5,3.0,3.0,3.5,3.3,3.3,4.0,5.6,3.1,3.8,3.8,3.8,5.3,2.5,2.5,2.5,2.5,2.5,2.5,2.2,2.2,2.5,2.5,2.5,2.5,2.5,2.5,2.7,2.7,3.4,3.4,4.0,4.7,2.2,2.2,2.4,2.4,3.0,3.0,3.5,2.2,2.2,2.4,2.4,3.0,3.0,3.3,1.8,1.8,1.8,1.8,1.8,4.7,5.7,2.7,2.7,2.7,3.4,3.4,4.0,4.0,2.0,2.0,2.0,2.0,2.8,1.9,2.0,2.0,2.0,2.0,2.5,2.5,2.8,2.8,1.9,1.9,2.0,2.0,2.5,2.5,1.8,1.8,2.0,2.0,2.8,2.8,3.6],
"cyl":[4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,4.0,4.0,6.0,6.0,6.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,6.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,6.0,6.0,6.0,6.0,8.0,8.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,6.0,6.0,8.0,8.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,6.0,6.0,6.0,6.0,8.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,8.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,4.0,8.0,8.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,4.0,4.0,5.0,5.0,6.0,6.0,4.0,4.0,4.0,4.0,5.0,5.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0],
"hwy":[29.0,29.0,31.0,30.0,26.0,26.0,27.0,26.0,25.0,28.0,27.0,25.0,25.0,25.0,25.0,24.0,25.0,23.0,20.0,15.0,20.0,17.0,17.0,26.0,23.0,26.0,25.0,24.0,19.0,14.0,15.0,17.0,27.0,30.0,26.0,29.0,26.0,24.0,24.0,22.0,22.0,24.0,24.0,17.0,22.0,21.0,23.0,23.0,19.0,18.0,17.0,17.0,19.0,19.0,12.0,17.0,15.0,17.0,17.0,12.0,17.0,16.0,18.0,15.0,16.0,12.0,17.0,17.0,16.0,12.0,15.0,16.0,17.0,15.0,17.0,17.0,18.0,17.0,19.0,17.0,19.0,19.0,17.0,17.0,17.0,16.0,16.0,17.0,15.0,17.0,26.0,25.0,26.0,24.0,21.0,22.0,23.0,22.0,20.0,33.0,32.0,32.0,29.0,32.0,34.0,36.0,36.0,29.0,26.0,27.0,30.0,31.0,26.0,26.0,28.0,26.0,29.0,28.0,27.0,24.0,24.0,24.0,22.0,19.0,20.0,17.0,12.0,19.0,18.0,14.0,15.0,18.0,18.0,15.0,17.0,16.0,18.0,17.0,19.0,19.0,17.0,29.0,27.0,31.0,32.0,27.0,26.0,26.0,25.0,25.0,17.0,17.0,20.0,18.0,26.0,26.0,27.0,28.0,25.0,25.0,24.0,27.0,25.0,26.0,23.0,26.0,26.0,26.0,26.0,25.0,27.0,25.0,27.0,20.0,20.0,19.0,17.0,20.0,17.0,29.0,27.0,31.0,31.0,26.0,26.0,28.0,27.0,29.0,31.0,31.0,26.0,26.0,27.0,30.0,33.0,35.0,37.0,35.0,15.0,18.0,20.0,20.0,22.0,17.0,19.0,18.0,20.0,29.0,26.0,29.0,29.0,24.0,44.0,29.0,26.0,29.0,29.0,29.0,29.0,23.0,24.0,44.0,41.0,29.0,26.0,28.0,29.0,29.0,29.0,28.0,29.0,26.0,26.0,26.0]
},
"mapping":{
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"Unnamed: 0"
},{
"type":"str",
"column":"manufacturer"
},{
"type":"str",
"column":"model"
},{
"type":"float",
"column":"displ"
},{
"type":"int",
"column":"year"
},{
"type":"int",
"column":"cyl"
},{
"type":"str",
"column":"trans"
},{
"type":"str",
"column":"drv"
},{
"type":"int",
"column":"cty"
},{
"type":"int",
"column":"hwy"
},{
"type":"str",
"column":"fl"
},{
"type":"str",
"column":"class"
}]
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"point",
"mapping":{
"x":"displ",
"y":"hwy",
"color":"cyl"
},
"data_meta":{
},
"data":{
}
}],
"metainfo_list":[],
"spec_id":"1"
};
           window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });
       } else {
           fig.updateView({});
       }
   }
   
   const renderImmediately = 
       forceImmediateRender || (
           sizing.width_mode === 'FIXED' && 
           (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')
       );
   
   if (renderImmediately) {
       renderPlot();
   }
   
   if (!renderImmediately || responsive) {
       // Set up observer for initial sizing or continuous monitoring
       var observer = new ResizeObserver(function(entries) {
           for (let entry of entries) {
               if (entry.contentBoxSize && 
                   entry.contentBoxSize[0].inlineSize > 0) {
                   if (!responsive && observer) {
                       observer.disconnect();
                       observer = null;
                   }
                   renderPlot();
                   if (!responsive) {
                       break;
                   }
               }
           }
       });
       
       observer.observe(containerDiv);
   }
   
   // ----------
   })();
   
   </script></div></div>
</div>
<p>Apply statistical data transformation to count the number of cases at each x position.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;..count..&#39;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s1">&#39;..count..&#39;</span><span class="p">),</span> <span class="n">stat</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="uRnF7t"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   const forceImmediateRender = false;
   const responsive = false;
   
   let sizing = {
       width_mode: "MIN",
       height_mode: "SCALED",
       width: null, 
       height: null 
   };
   
   const preferredWidth = document.body.dataset.letsPlotPreferredWidth;
   if (preferredWidth !== undefined) {
       sizing = {
           width_mode: 'FIXED',
           height_mode: 'SCALED',
           width: parseFloat(preferredWidth)
       };
   }
   
   const containerDiv = document.getElementById("uRnF7t");
   let fig = null;
   
   function renderPlot() {
       if (fig === null) {
           const plotSpec = {
"data":{
},
"mapping":{
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"Unnamed: 0"
},{
"type":"str",
"column":"manufacturer"
},{
"type":"str",
"column":"model"
},{
"type":"float",
"column":"displ"
},{
"type":"int",
"column":"year"
},{
"type":"int",
"column":"cyl"
},{
"type":"str",
"column":"trans"
},{
"type":"str",
"column":"drv"
},{
"type":"int",
"column":"cty"
},{
"type":"int",
"column":"hwy"
},{
"type":"str",
"column":"fl"
},{
"type":"str",
"column":"class"
}]
},
"kind":"plot",
"scales":[],
"layers":[{
"geom":"point",
"stat":"count",
"mapping":{
"x":"displ",
"size":"..count..",
"col":"..count.."
},
"data_meta":{
},
"data":{
"..count..":[14.0,21.0,10.0,6.0,4.0,6.0,8.0,1.0,2.0,1.0,1.0,13.0,5.0,2.0,8.0,9.0,8.0,15.0,3.0,3.0,17.0,5.0,2.0,11.0,8.0,2.0,5.0,20.0,8.0,1.0,1.0,1.0,6.0,4.0,3.0],
"displ":[1.8,2.0,2.8,3.1,4.2,5.3,5.7,6.0,6.2,7.0,6.5,2.4,3.5,3.6,3.0,3.3,3.8,4.0,3.7,3.9,4.7,5.2,5.9,4.6,5.4,5.0,1.6,2.5,2.7,6.1,4.4,5.6,2.2,3.4,1.9]
}
}],
"metainfo_list":[],
"spec_id":"2"
};
           window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });
       } else {
           fig.updateView({});
       }
   }
   
   const renderImmediately = 
       forceImmediateRender || (
           sizing.width_mode === 'FIXED' && 
           (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')
       );
   
   if (renderImmediately) {
       renderPlot();
   }
   
   if (!renderImmediately || responsive) {
       // Set up observer for initial sizing or continuous monitoring
       var observer = new ResizeObserver(function(entries) {
           for (let entry of entries) {
               if (entry.contentBoxSize && 
                   entry.contentBoxSize[0].inlineSize > 0) {
                   if (!responsive && observer) {
                       observer.disconnect();
                       observer = null;
                   }
                   renderPlot();
                   if (!responsive) {
                       break;
                   }
               }
           }
       });
       
       observer.observe(containerDiv);
   }
   
   // ----------
   })();
   
   </script></div></div>
</div>
<p>Change the pallete and the legend, add the title.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">+=</span> <span class="n">scale_color_continuous</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="s2">&quot;pink&quot;</span><span class="p">,</span> <span class="n">guide</span><span class="o">=</span><span class="n">guide_legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> \
     <span class="o">+</span> <span class="n">ggtitle</span><span class="p">(</span><span class="s1">&#39;Highway MPG by displacement&#39;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="s1">&#39;hwy&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyl&#39;</span><span class="p">),</span> <span class="n">position</span><span class="o">=</span><span class="n">position_jitter</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="tQfHju"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   const forceImmediateRender = false;
   const responsive = false;
   
   let sizing = {
       width_mode: "MIN",
       height_mode: "SCALED",
       width: null, 
       height: null 
   };
   
   const preferredWidth = document.body.dataset.letsPlotPreferredWidth;
   if (preferredWidth !== undefined) {
       sizing = {
           width_mode: 'FIXED',
           height_mode: 'SCALED',
           width: parseFloat(preferredWidth)
       };
   }
   
   const containerDiv = document.getElementById("tQfHju");
   let fig = null;
   
   function renderPlot() {
       if (fig === null) {
           const plotSpec = {
"data":{
"displ":[1.8,1.8,2.0,2.0,2.8,2.8,3.1,1.8,1.8,2.0,2.0,2.8,2.8,3.1,3.1,2.8,3.1,4.2,5.3,5.3,5.3,5.7,6.0,5.7,5.7,6.2,6.2,7.0,5.3,5.3,5.7,6.5,2.4,2.4,3.1,3.5,3.6,2.4,3.0,3.3,3.3,3.3,3.3,3.3,3.8,3.8,3.8,4.0,3.7,3.7,3.9,3.9,4.7,4.7,4.7,5.2,5.2,3.9,4.7,4.7,4.7,5.2,5.7,5.9,4.7,4.7,4.7,4.7,4.7,4.7,5.2,5.2,5.7,5.9,4.6,5.4,5.4,4.0,4.0,4.0,4.0,4.6,5.0,4.2,4.2,4.6,4.6,4.6,5.4,5.4,3.8,3.8,4.0,4.0,4.6,4.6,4.6,4.6,5.4,1.6,1.6,1.6,1.6,1.6,1.8,1.8,1.8,2.0,2.4,2.4,2.4,2.4,2.5,2.5,3.3,2.0,2.0,2.0,2.0,2.7,2.7,2.7,3.0,3.7,4.0,4.7,4.7,4.7,5.7,6.1,4.0,4.2,4.4,4.6,5.4,5.4,5.4,4.0,4.0,4.6,5.0,2.4,2.4,2.5,2.5,3.5,3.5,3.0,3.0,3.5,3.3,3.3,4.0,5.6,3.1,3.8,3.8,3.8,5.3,2.5,2.5,2.5,2.5,2.5,2.5,2.2,2.2,2.5,2.5,2.5,2.5,2.5,2.5,2.7,2.7,3.4,3.4,4.0,4.7,2.2,2.2,2.4,2.4,3.0,3.0,3.5,2.2,2.2,2.4,2.4,3.0,3.0,3.3,1.8,1.8,1.8,1.8,1.8,4.7,5.7,2.7,2.7,2.7,3.4,3.4,4.0,4.0,2.0,2.0,2.0,2.0,2.8,1.9,2.0,2.0,2.0,2.0,2.5,2.5,2.8,2.8,1.9,1.9,2.0,2.0,2.5,2.5,1.8,1.8,2.0,2.0,2.8,2.8,3.6],
"cyl":[4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,4.0,4.0,6.0,6.0,6.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,6.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,6.0,6.0,6.0,6.0,8.0,8.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,6.0,6.0,8.0,8.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,8.0,6.0,6.0,6.0,6.0,8.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,8.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,4.0,8.0,8.0,4.0,4.0,4.0,6.0,6.0,6.0,6.0,4.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,4.0,4.0,5.0,5.0,6.0,6.0,4.0,4.0,4.0,4.0,5.0,5.0,4.0,4.0,4.0,4.0,6.0,6.0,6.0],
"hwy":[29.0,29.0,31.0,30.0,26.0,26.0,27.0,26.0,25.0,28.0,27.0,25.0,25.0,25.0,25.0,24.0,25.0,23.0,20.0,15.0,20.0,17.0,17.0,26.0,23.0,26.0,25.0,24.0,19.0,14.0,15.0,17.0,27.0,30.0,26.0,29.0,26.0,24.0,24.0,22.0,22.0,24.0,24.0,17.0,22.0,21.0,23.0,23.0,19.0,18.0,17.0,17.0,19.0,19.0,12.0,17.0,15.0,17.0,17.0,12.0,17.0,16.0,18.0,15.0,16.0,12.0,17.0,17.0,16.0,12.0,15.0,16.0,17.0,15.0,17.0,17.0,18.0,17.0,19.0,17.0,19.0,19.0,17.0,17.0,17.0,16.0,16.0,17.0,15.0,17.0,26.0,25.0,26.0,24.0,21.0,22.0,23.0,22.0,20.0,33.0,32.0,32.0,29.0,32.0,34.0,36.0,36.0,29.0,26.0,27.0,30.0,31.0,26.0,26.0,28.0,26.0,29.0,28.0,27.0,24.0,24.0,24.0,22.0,19.0,20.0,17.0,12.0,19.0,18.0,14.0,15.0,18.0,18.0,15.0,17.0,16.0,18.0,17.0,19.0,19.0,17.0,29.0,27.0,31.0,32.0,27.0,26.0,26.0,25.0,25.0,17.0,17.0,20.0,18.0,26.0,26.0,27.0,28.0,25.0,25.0,24.0,27.0,25.0,26.0,23.0,26.0,26.0,26.0,26.0,25.0,27.0,25.0,27.0,20.0,20.0,19.0,17.0,20.0,17.0,29.0,27.0,31.0,31.0,26.0,26.0,28.0,27.0,29.0,31.0,31.0,26.0,26.0,27.0,30.0,33.0,35.0,37.0,35.0,15.0,18.0,20.0,20.0,22.0,17.0,19.0,18.0,20.0,29.0,26.0,29.0,29.0,24.0,44.0,29.0,26.0,29.0,29.0,29.0,29.0,23.0,24.0,44.0,41.0,29.0,26.0,28.0,29.0,29.0,29.0,28.0,29.0,26.0,26.0,26.0]
},
"mapping":{
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"Unnamed: 0"
},{
"type":"str",
"column":"manufacturer"
},{
"type":"str",
"column":"model"
},{
"type":"float",
"column":"displ"
},{
"type":"int",
"column":"year"
},{
"type":"int",
"column":"cyl"
},{
"type":"str",
"column":"trans"
},{
"type":"str",
"column":"drv"
},{
"type":"int",
"column":"cty"
},{
"type":"int",
"column":"hwy"
},{
"type":"str",
"column":"fl"
},{
"type":"str",
"column":"class"
}]
},
"ggtitle":{
"text":"Highway MPG by displacement"
},
"kind":"plot",
"scales":[{
"aesthetic":"color",
"guide":{
"name":"legend",
"ncol":2.0
},
"scale_mapper_kind":"color_gradient",
"low":"blue",
"high":"pink"
}],
"layers":[{
"geom":"point",
"mapping":{
"x":"displ",
"y":"hwy",
"color":"cyl"
},
"position":{
"name":"jitter",
"seed":42.0
},
"data_meta":{
},
"data":{
}
}],
"metainfo_list":[],
"spec_id":"3"
};
           window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });
       } else {
           fig.updateView({});
       }
   }
   
   const renderImmediately = 
       forceImmediateRender || (
           sizing.width_mode === 'FIXED' && 
           (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')
       );
   
   if (renderImmediately) {
       renderPlot();
   }
   
   if (!renderImmediately || responsive) {
       // Set up observer for initial sizing or continuous monitoring
       var observer = new ResizeObserver(function(entries) {
           for (let entry of entries) {
               if (entry.contentBoxSize && 
                   entry.contentBoxSize[0].inlineSize > 0) {
                   if (!responsive && observer) {
                       observer.disconnect();
                       observer = null;
                   }
                   renderPlot();
                   if (!responsive) {
                       break;
                   }
               }
           }
       });
       
       observer.observe(containerDiv);
   }
   
   // ----------
   })();
   
   </script></div></div>
</div>
<p>Apply the randomly stratified sampling to select points from each group proportionally
to the group size.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="s1">&#39;hwy&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyl&#39;</span><span class="p">),</span>
                <span class="n">position</span><span class="o">=</span><span class="n">position_jitter</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">),</span>
                <span class="n">sampling</span><span class="o">=</span><span class="n">sampling_random_stratified</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="fx6LYb"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
   
   (function() {
   // ----------
   
   const forceImmediateRender = false;
   const responsive = false;
   
   let sizing = {
       width_mode: "MIN",
       height_mode: "SCALED",
       width: null, 
       height: null 
   };
   
   const preferredWidth = document.body.dataset.letsPlotPreferredWidth;
   if (preferredWidth !== undefined) {
       sizing = {
           width_mode: 'FIXED',
           height_mode: 'SCALED',
           width: parseFloat(preferredWidth)
       };
   }
   
   const containerDiv = document.getElementById("fx6LYb");
   let fig = null;
   
   function renderPlot() {
       if (fig === null) {
           const plotSpec = {
"data":{
},
"mapping":{
},
"data_meta":{
"series_annotations":[{
"type":"int",
"column":"Unnamed: 0"
},{
"type":"str",
"column":"manufacturer"
},{
"type":"str",
"column":"model"
},{
"type":"float",
"column":"displ"
},{
"type":"int",
"column":"year"
},{
"type":"int",
"column":"cyl"
},{
"type":"str",
"column":"trans"
},{
"type":"str",
"column":"drv"
},{
"type":"int",
"column":"cty"
},{
"type":"int",
"column":"hwy"
},{
"type":"str",
"column":"fl"
},{
"type":"str",
"column":"class"
}]
},
"ggtitle":{
"text":"Highway MPG by displacement"
},
"kind":"plot",
"scales":[{
"aesthetic":"color",
"guide":{
"name":"legend",
"ncol":2.0
},
"scale_mapper_kind":"color_gradient",
"low":"blue",
"high":"pink"
}],
"layers":[{
"geom":"point",
"mapping":{
"x":"displ",
"y":"hwy",
"color":"cyl"
},
"position":{
"name":"jitter",
"seed":42.0
},
"sampling":{
"name":"random_stratified",
"n":40.0,
"seed":42.0
},
"data_meta":{
},
"data":{
"displ":[2.8,3.1,5.7,2.4,3.3,4.7,4.7,5.2,4.7,4.0,4.6,4.6,1.6,1.6,1.6,1.6,1.8,2.0,2.4,2.5,2.0,3.0,3.7,5.4,5.0,3.3,5.3,2.5,2.5,2.2,2.5,2.5,2.5,3.0,2.7,2.8,2.5,2.8,2.5,2.0],
"cyl":[6.0,6.0,8.0,4.0,6.0,8.0,8.0,8.0,8.0,6.0,8.0,8.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,4.0,6.0,6.0,8.0,8.0,6.0,8.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,4.0,6.0,5.0,6.0,5.0,4.0],
"hwy":[26.0,25.0,23.0,24.0,22.0,19.0,19.0,15.0,12.0,17.0,21.0,23.0,33.0,32.0,32.0,32.0,36.0,29.0,27.0,26.0,26.0,22.0,19.0,18.0,17.0,17.0,25.0,27.0,23.0,26.0,26.0,25.0,27.0,26.0,22.0,24.0,29.0,24.0,28.0,29.0]
}
}],
"metainfo_list":[],
"spec_id":"4",
"computation_messages":["sampling_random_stratified(n=40, seed=42) was applied to [point/identity stat] layer"]
};
           window.letsPlotCall(function() { fig = LetsPlot.buildPlotFromProcessedSpecs(plotSpec, containerDiv, sizing); });
       } else {
           fig.updateView({});
       }
   }
   
   const renderImmediately = 
       forceImmediateRender || (
           sizing.width_mode === 'FIXED' && 
           (sizing.height_mode === 'FIXED' || sizing.height_mode === 'SCALED')
       );
   
   if (renderImmediately) {
       renderPlot();
   }
   
   if (!renderImmediately || responsive) {
       // Set up observer for initial sizing or continuous monitoring
       var observer = new ResizeObserver(function(entries) {
           for (let entry of entries) {
               if (entry.contentBoxSize && 
                   entry.contentBoxSize[0].inlineSize > 0) {
                   if (!responsive && observer) {
                       observer.disconnect();
                       observer = null;
                   }
                   renderPlot();
                   if (!responsive) {
                       break;
                   }
               }
           }
       });
       
       observer.observe(containerDiv);
   }
   
   // ----------
   })();
   
   </script></div></div>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-requirements">System requirements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-lets-plot-architecture">Understanding Lets-Plot architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-api">Learning API</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#geometric-objects-geom">Geometric objects <code class="docutils literal notranslate"><span class="pre">geom</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#collections-of-plots">Collections of plots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interactivity">Interactivity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stat-stat">Stat <code class="docutils literal notranslate"><span class="pre">stat</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aesthetic-mappings-mapping">Aesthetic mappings <code class="docutils literal notranslate"><span class="pre">mapping</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#position-adjustment-position">Position adjustment <code class="docutils literal notranslate"><span class="pre">position</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#features-affecting-the-entire-plot">Features affecting the entire plot</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scales">Scales</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#coordinated-system">Coordinated system</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#legend">Legend</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sampling">Sampling</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting started</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">
  Copyright © 2019-2025 JetBrains s.r.o.
</p></div>
      
    </div>
  
  
    <div class="footer-items__center">
      
        <div class="footer-item">
<p class="sphinx-version theme-version">
  Created using
  <a class="reference external" href="https://www.sphinx-doc.org/" target="_blank">Sphinx</a>
  8.1.3 and
  <a class="reference external" href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html" target="_blank">PyData Sphinx Theme</a>
  0.16.1.
<p></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="terms">
  <a class="reference internal terms-of-service" href="../../_static/docs/lets-plot_terms.pdf" target="_blank">
    Terms
  </a>
  |
  <a class="reference internal licenses" href="../../python/pages/licenses.html">
    Licenses
  </a>
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>