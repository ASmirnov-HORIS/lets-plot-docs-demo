<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-07-04T14:49:56.188590415"><title>Working with Categorical Variables and the asDiscrete() Function | Lets-Plot for Kotlin</title><script type="application/json" id="virtual-toc-data">[{"id":"usage","level":0,"title":"Usage","anchor":"#usage"},{"id":"examples","level":0,"title":"Examples","anchor":"#examples"},{"id":"example-notebooks","level":0,"title":"Example Notebooks","anchor":"#example-notebooks"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b267/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/favicon.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Working with Categorical Variables and the asDiscrete() Function | Lets-Plot for Kotlin"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Lets-Plot for Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lets-plot.org/kotlin/4.7.3/as-discrete.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Working with Categorical Variables and the asDiscrete() Function | Lets-Plot for Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://lets-plot.org/kotlin/4.7.3/as-discrete.html#webpage",
    "url": "https://lets-plot.org/kotlin/4.7.3/as-discrete.html",
    "name": "Working with Categorical Variables and the asDiscrete() Function | Lets-Plot for Kotlin",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://lets-plot.orgkotlin/#website",
    "url": "https://lets-plot.orgkotlin/",
    "name": "Lets-Plot for Kotlin Help"
}</script><!-- End Schema.org --><script type="text/javascript">
    document.addEventListener("DOMContentLoaded", onDOMContentLoaded);

    function onDOMContentLoaded() {
        addGitHubLinkToHeader();
    }

    function addGitHubLinkToHeader() {
        function createGitHubLink() {
            const gitHubLinkElem = document.createElement("a");
            gitHubLinkElem.setAttribute("href", "https://github.com/JetBrains/lets-plot-kotlin");
            gitHubLinkElem.setAttribute("id", "github-repo-link");
            return gitHubLinkElem;
        }

        whenLoaded("header .wh-header").then((headerElem) => {
            const switchersElem = headerElem.querySelector(".wh-header__switchers");
            const gitHubLinkElem = createGitHubLink();
            headerElem.insertBefore(gitHubLinkElem, switchersElem);
        });
    }

    function whenLoaded(selector) {
        return new Promise(resolve => {
            const element = document.querySelector(selector);
            if (element) {
                resolve(element);
            } else {
                const observer = new MutationObserver(() => {
                    const element = document.querySelector(selector);
                    if (element) {
                        observer.disconnect();
                        resolve(element);
                    }
                });
                observer.observe(document.body, { childList: true, subtree: true });
            }
        });
    }
</script>

<style>
    #github-repo-link {
      width: 36px;
      height: 36px;
      background-image: url(https://raw.githubusercontent.com/JetBrains/lets-plot-kotlin/master/docs/images/homepage.svg);
      background-size: 24px 24px;
      background-position: 50% 50%;
      background-repeat: no-repeat;
      border-radius: 50%;
    }

    #github-repo-link:hover {
      background-color: hsla(0, 0%, 100%, .1);
    }

    header .wh-header__switchers>button {
      margin-left: 4px;
      margin-right: 2px;
    }

    header .wh-header__search-button {
      margin-left: 0;
      margin-right: -6px;
    }
</style></head><body data-id="as_discrete" data-main-title="Working with Categorical Variables and the asDiscrete() Function" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Key Features"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Lets-Plot for Kotlin 4.7.3 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="as_discrete" id="as_discrete.md">Working with Categorical Variables and the asDiscrete() Function</h1><p id="vxgw3f_2">In data analysis and visualization, discrete data commonly appears as categorical variables. These can be classified as:</p><ul class="list _bullet" id="vxgw3f_3"><li class="list__item" id="vxgw3f_4"><p>Nominal: unordered categories (e.g., colors, names)</p></li><li class="list__item" id="vxgw3f_5"><p>Ordinal: categories with a meaningful order (e.g., education levels, rating scales)</p></li></ul><p id="vxgw3f_6">When visualizing Pandas series in <span class="emphasis" id="vxgw3f_7">Lets-Plot</span>, ordinal data can be represented using <a href="https://pandas.pydata.org/docs/user_guide/categorical.html" id="vxgw3f_8" data-external="true" rel="noopener noreferrer">Pandas Categorical</a> type with the ordered parameter set to <code class="code" id="vxgw3f_9">True</code> and a specified category order. <span class="emphasis" id="vxgw3f_10">Lets-Plot</span> will respect this ordering in the resulting visualizations.</p><p id="vxgw3f_11">Alternatively, <span class="emphasis" id="vxgw3f_12">Lets-Plot</span> provides the <a href="https://lets-plot.org/kotlin/api-reference/-lets--plot--kotlin/org.jetbrains.letsPlot/as-discrete.html" id="vxgw3f_13" data-external="true" rel="noopener noreferrer"><code class="code" id="vxgw3f_14">asDiscrete</code></a> function, which offers similar capabilities for any data type, not limited to Pandas DataFrames. This function allows for flexible manipulation of discrete data, including:</p><ol class="list _decimal" id="vxgw3f_15" type="1"><li class="list__item" id="vxgw3f_16"><p>Annotation of numeric data as discrete: This allows continuous variables to be treated as categorical for visualization purposes.</p></li><li class="list__item" id="vxgw3f_17"><p>Specification of discrete variable ordering: The order can be based on the variable&rsquo;s own values or the values of another variable.</p></li><li class="list__item" id="vxgw3f_18"><p>Custom ordering through explicit &quot;factor levels&quot;: This feature allows for manual specification of category order.</p></li></ol><p id="vxgw3f_19">The <a href="https://lets-plot.org/kotlin/api-reference/-lets--plot--kotlin/org.jetbrains.letsPlot/as-discrete.html" id="vxgw3f_20" data-external="true" rel="noopener noreferrer"><code class="code" id="vxgw3f_21">asDiscrete</code></a> function thus allows for precise control over how categories are represented and ordered in plots, regardless of the original data format.</p><section class="chapter"><h2 id="usage" data-toc="usage">Usage</h2><div class="code-block" data-lang="kotlin">
asDiscrete(variable, label=null, orderBy=null, order=null, levels=null)
</div><p id="vxgw3f_23">where</p><ul class="list _bullet" id="vxgw3f_24"><li class="list__item" id="vxgw3f_25"><p><code class="code" id="vxgw3f_26">variable</code> (string) - the name of the data variable (which is mapped to the plot aesthetic);</p></li><li class="list__item" id="vxgw3f_27"><p><code class="code" id="vxgw3f_28">label</code> (string) - the name of the scale - it will be used as the axis label or as the legend title;</p></li><li class="list__item" id="vxgw3f_29"><p><code class="code" id="vxgw3f_30">orderBy</code> (string) - the name of the variable by which the ordering will be performed;</p></li><li class="list__item" id="vxgw3f_31"><p><code class="code" id="vxgw3f_32">order</code> (integer) - the ordering direction - <code class="code" id="vxgw3f_33">1</code> for ascending direction and <code class="code" id="vxgw3f_34">-1</code> for descending (default value).</p></li></ul><p id="vxgw3f_35">To enable ordering mode, at least one ordering parameter (<code class="code" id="vxgw3f_36">orderBy</code> or <code class="code" id="vxgw3f_37">order</code>) should be specified. By the default, it will use descending direction and ordering by eigenvalues. You cannot specify different order settings for the same variable. However, if these settings don't contradict each other, they will be combined.</p><p id="vxgw3f_38">The <code class="code" id="vxgw3f_39">orderBy</code> is a numeric variable, which values are used for reordering. It's also possible to use statistical variables. The reordering uses the average value. The exception is plots with the <code class="code" id="vxgw3f_40">stack</code> position adjustment, where multiple bars occupying the same <code class="code" id="vxgw3f_41">x</code> position are stacked atop one another: in this case, the sum is calculated to get the order of the stack sizes.</p></section><section class="chapter"><h2 id="examples" data-toc="examples">Examples</h2><div class="code-block" data-lang="kotlin">
val p = letsPlot(mpg)
p + geomPoint { x = &quot;displ&quot;; y = &quot;hwy&quot;; color = &quot;cyl&quot; }
</div><figure id="vxgw3f_43"><img alt="as_discrete_1.png" src="images/as_discrete_1.png" title="as_discrete_1.png" width="480" height="320"></figure><p id="vxgw3f_44">Let's annotate the 'cyl' variable as discrete using the <code class="code" id="vxgw3f_45">asDiscrete('cyl')</code> function. As a result, the data is divided into groups, a discrete color scale is assigned instead of a continuous one:</p><div class="code-block" data-lang="kotlin">
p + geomPoint { x = &quot;displ&quot;; y = &quot;hwy&quot;; color = asDiscrete(&quot;cyl&quot;) }
</div><figure id="vxgw3f_47"><img alt="as_discrete_2.png" src="images/as_discrete_2.png" title="as_discrete_2.png" width="480" height="320"></figure><p id="vxgw3f_48">Set the 'cyl' variable in ascending order of its values:</p><div class="code-block" data-lang="kotlin">
p + geomPoint { x = &quot;displ&quot;; y = &quot;hwy&quot;; color = asDiscrete(&quot;cyl&quot;, order = 1) }
</div><figure id="vxgw3f_50"><img alt="as_discrete_3.png" src="images/as_discrete_3.png" title="as_discrete_3.png" width="480" height="320"></figure><p id="vxgw3f_51">Boxplot example:</p><div class="code-block" data-lang="kotlin">
p + geomBoxplot { x = &quot;class&quot;; y = &quot;hwy&quot; }
</div><figure id="vxgw3f_53"><img alt="as_discrete_4.png" src="images/as_discrete_4.png" title="as_discrete_4.png" width="480" height="320"></figure><p id="vxgw3f_54">Order <code class="code" id="vxgw3f_55">x</code> alphabetically:</p><div class="code-block" data-lang="kotlin">
p + geomBoxplot { x = asDiscrete(&quot;class&quot;, order = 1); y = &quot;hwy&quot; }
</div><figure id="vxgw3f_57"><img alt="as_discrete_5.png" src="images/as_discrete_5.png" title="as_discrete_5.png" width="480" height="320"></figure><p id="vxgw3f_58">Order <code class="code" id="vxgw3f_59">x</code> by another variable - in descending order of the median:</p><div class="code-block" data-lang="kotlin">
p + geomBoxplot { x = asDiscrete(&quot;class&quot;, orderBy = &quot;..middle..&quot;); y = &quot;hwy&quot; }
</div><figure id="vxgw3f_61"><img alt="as_discrete_6.png" src="images/as_discrete_6.png" title="as_discrete_6.png" width="480" height="320"></figure><p id="vxgw3f_62">Add <code class="code" id="vxgw3f_63">color</code> associated with the same variable. The ordering is also applied to it, which will be visible in the legend:</p><div class="code-block" data-lang="kotlin">
p + geomBoxplot { x = asDiscrete(&quot;class&quot;, order = 1); y = &quot;hwy&quot;; color = &quot;class&quot; }
</div><figure id="vxgw3f_65"><img alt="as_discrete_7.png" src="images/as_discrete_7.png" title="as_discrete_7.png" width="480" height="320"></figure><p id="vxgw3f_66">Two different ordering settings are specified for the <code class="code" id="vxgw3f_67">class</code> variable. These settings don't contradict each other. This means that they will be combined, and the variable will be ordered in ascending order <code class="code" id="vxgw3f_68">ymax</code>:</p><div class="code-block" data-lang="kotlin">
p + geomBoxplot { x = asDiscrete(&quot;class&quot;, orderBy = &quot;..ymax..&quot;); y = &quot;hwy&quot;; color = asDiscrete(&quot;class&quot;, order = 1) }
</div><figure id="vxgw3f_70"><img alt="as_discrete_8.png" src="images/as_discrete_8.png" title="as_discrete_8.png" width="480" height="320"></figure><p id="vxgw3f_71">Use the <code class="code" id="vxgw3f_72">levels</code> parameter to specify the exact order for the variable:</p><div class="code-block" data-lang="kotlin">
val customOrder = listOf(&quot;subcompact&quot;, &quot;compact&quot;, &quot;suv&quot;, &quot;minivan&quot;, &quot;midsize&quot;, &quot;pickup&quot;, &quot;2seater&quot;)
p + geomBoxplot { x = asDiscrete(&quot;class&quot;, levels = customOrder); y = &quot;hwy&quot;; color = &quot;class&quot; }
</div><figure id="vxgw3f_74"><img alt="as_discrete_9.png" src="images/as_discrete_9.png" title="as_discrete_9.png" width="480" height="320"></figure><p id="vxgw3f_75">Example of ordering for two variables:</p><div class="code-block" data-lang="kotlin">
p + geomBar { x = asDiscrete(&quot;manufacturer&quot;, order = 1); fill = asDiscrete(&quot;class&quot;, order = 1) }
</div><figure id="vxgw3f_77"><img alt="as_discrete_10.png" src="images/as_discrete_10.png" title="as_discrete_10.png" width="480" height="320"></figure><p id="vxgw3f_78">Reorder <code class="code" id="vxgw3f_79">x</code> by counts to get from highest on the left to lowest on the right:</p><div class="code-block" data-lang="kotlin">
p + geomBar { x = asDiscrete(&quot;manufacturer&quot;, orderBy = &quot;..count..&quot;); fill = asDiscrete(&quot;class&quot;, order = 1) }
</div><figure id="vxgw3f_81"><img alt="as_discrete_11.png" src="images/as_discrete_11.png" title="as_discrete_11.png" width="480" height="320"></figure><p id="vxgw3f_82">Apply sampling to the plot after reordering:</p><div class="code-block" data-lang="kotlin">
p + geomBar(sampling = samplingPick(4)) { x = asDiscrete(&quot;manufacturer&quot;, orderBy = &quot;..count..&quot;); fill = asDiscrete(&quot;class&quot;, order = 1) }
</div><figure id="vxgw3f_84"><img alt="as_discrete_12.png" src="images/as_discrete_12.png" title="as_discrete_12.png" width="480" height="277"></figure></section><section class="chapter"><h2 id="example-notebooks" data-toc="example-notebooks">Example Notebooks</h2><ul class="list _bullet" id="vxgw3f_85"><li class="list__item" id="vxgw3f_86"><p><a href="https://nbviewer.org/github/JetBrains/lets-plot-docs/blob/master/source/kotlin_examples/cookbook/geom_smooth.ipynb" id="vxgw3f_87" data-external="true" rel="noopener noreferrer">Smoothing</a></p></li><li class="list__item" id="vxgw3f_88"><p><a href="https://nbviewer.org/github/JetBrains/lets-plot-docs/blob/master/source/kotlin_examples/cookbook/ordering_examples.ipynb" id="vxgw3f_89" data-external="true" rel="noopener noreferrer">Guide to ordering</a></p></li><li class="list__item" id="vxgw3f_90"><p><a href="https://nbviewer.org/github/JetBrains/lets-plot-docs/blob/master/source/kotlin_examples/cookbook/factor_levels.ipynb" id="vxgw3f_91" data-external="true" rel="noopener noreferrer">Factor levels</a></p></li></ul></section><div class="last-modified">Last modified: 14 June 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="presentation-options.html" class="navigation-links__prev">Presentation Options</a><a href="misc.html" class="navigation-links__next">Miscellaneous</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b267/app.js"></script></body></html>